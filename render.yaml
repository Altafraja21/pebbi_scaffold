services:

  # ================
  # BACKEND SERVICE
  # ================
  - type: web
    name: backend
    env: docker
    repo: https://github.com/<your-username>/<your-repo>
    branch: main
    dockerfilePath: services/backend/Dockerfile
    plan: free
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: pebbi-db
          property: connectionString
      - key: REDIS_URL
        fromService:
          name: pebbi-redis
          type: redis
          property: connectionString

  # ======================
  # REAL TIME ENGINE (WS)
  # ======================
  - type: web
    name: real-time-engine
    env: docker
    dockerfilePath: services/real-time-engine/Dockerfile
    plan: free

  # ======================
  # AI ENGINE
  # ======================
  - type: web
    name: ai-engine
    env: docker
    dockerfilePath: services/ai-engine/Dockerfile
    plan: free

  # ======================
  # MEMORY SERVICE
  # ======================
  - type: web
    name: memory-service
    env: docker
    dockerfilePath: services/memory-service/Dockerfile
    plan: free

  # ======================
  # STT SERVICE
  # ======================
  - type: web
    name: stt-service
    env: docker
    dockerfilePath: services/stt-service/Dockerfile
    plan: free

  # ======================
  # TTS SERVICE
  # ======================
  - type: web
    name: tts-service
    env: docker
    dockerfilePath: services/tts-service/Dockerfile
    plan: free

  # ======================
  # FORCED ALIGNER
  # ======================
  - type: background
    name: forced-aligner
    env: docker
    dockerfilePath: services/forced-aligner/Dockerfile
    plan: free

databases:
  - name: pebbi-db
    databaseName: pebbi
    plan: free

redis:
  - name: pebbi-redis
    plan: free
